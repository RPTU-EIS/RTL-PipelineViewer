
<html>
<head>
<title>Pipeline & Register Animation</title>
<style>
body { font-family: sans-serif; margin: 20px; }
h2, h3 { text-align: center; }
.controls { text-align: center; margin-bottom: 20px; display: flex; justify-content: center; align-items: center; gap: 10px; flex-wrap: wrap; }
.controls button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
#cycleCounter { font-size: 18px; font-weight: bold; }
.speed-control-container { display: flex; align-items: center; gap: 5px; }
#speedValue { font-family: monospace; font-size: 14px; min-width: 50px; text-align: left; }
.content-wrapper { display: flex; justify-content: space-around; align-items: flex-start; gap: 20px; flex-wrap: wrap; }
.pipeline-container { overflow-x: auto; }
.pipeline-grid, .register-grid, .hazard-grid { display: grid; border: 1px solid #ccc; width: fit-content; }
.pipeline-grid { grid-template-columns: 390px repeat(5, 140px); }
.register-grid { grid-template-columns: 120px 200px; }
.hazard-grid { grid-template-columns: repeat(5, auto); max-height: 400px; overflow-y: auto; }
.grid-header, .grid-cell { padding: 8px; border: 1px solid #eee; text-align: center; white-space: nowrap; }
.grid-header { background-color: #ddd; font-weight: bold; }
.instruction-label { text-align: left; font-weight: bold; font-family: monospace; font-size: 14px; cursor: pointer; }
.stage-cell { height: 50px; position: relative; } /* Increased height for EX content */
.stage-content { 
    width: 95%; height: 95%; border-radius: 5px; 
    display: flex; flex-direction: column; /* Arrange content vertically */
    align-items: center; justify-content: center; /* Center content */
    font-size: 11px; color: #333; cursor: help; 
    transition: all 0.2s ease-in-out; margin: auto;
    line-height: 1.2; /* Adjust line spacing */
    padding: 2px;
}
.tooltip-text { visibility: hidden; background-color: #555; color: #fff; text-align: left; border-radius: 6px; padding: 8px; position: absolute; z-index: 10; bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; width: max-content; white-space: pre-wrap; }
.stage-content:hover .tooltip-text { visibility: visible; opacity: 1; }
.legend { margin: 20px auto; display: flex; justify-content: center; gap: 20px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; width: fit-content; flex-wrap: wrap; }
.legend-item { display: inline-flex; align-items: center; gap: 8px; }
.legend-color-box { width: 20px; height: 20px; border-radius: 4px; border: 2px solid; }
.register-name-cell { font-family: monospace; text-align: left !important; padding-left: 10px !important; }
.register-value-cell { font-family: monospace; }
.register-value-cell.changed {
    background-color: #FFD700;
    transition: background-color 0.1s ease-in;
}
.hazard-source-highlight {
    border: 3px solid #FF4500 !important;
    box-shadow: 0 0 10px rgba(255, 69, 0, 0.7);
}
.forwarding-destination-highlight {
    border: 3px solid #007BFF !important;
    box-shadow: 0 0 10px rgba(0, 123, 255, 0.7);
    background-color: #cce5ff !important;
}
.hazard-row:hover { background-color: #f0f0f0; cursor: pointer; }
.hidden { display: none; }
</style>
</head>
<body>
<h2>Pipeline Animation with Register State</h2>
<div class="controls">
    <button id="prevBtn">Previous</button>
    <span id="cycleCounter">Cycle 0 / 24</span>
    <button id="nextBtn">Next</button>
    <button id="playPauseBtn">Play</button>
    <button id="restartBtn">Restart</button>
    <div class="speed-control-container">
        <label for="speedControl">Speed:</label>
        <input type="range" id="speedControl" min="100" max="1000" value="500" step="50">
        <span id="speedValue">500ms</span>
    </div>
    <input type="text" id="searchBox" placeholder="Search PC or instruction...">
    <button id="exportBtn">Export HTML</button>
</div>

<div class="legend">
    <div class="legend-item">
        <div class="legend-color-box" style="border-color: #FF4500; background-color: #fff2e6;"></div>
        <span>Hazard Source (Supplying data from MEM/WB)</span>
    </div>
    <div class="legend-item">
        <div class="legend-color-box" style="border-color: #007BFF; background-color: #cce5ff;"></div>
        <span>Forwarding Destination (Receiving data in EX)</span>
    </div>
</div>

<div class="content-wrapper">
    <div class="pipeline-container">
        <h3>Pipeline Stages</h3>
        <div id="pipelineDisplay" class="pipeline-grid">
            <div class="grid-header">Instruction</div>
            <div class="grid-header">IF</div><div class="grid-header">ID</div>
            <div class="grid-header">EX</div><div class="grid-header">MEM</div><div class="grid-header">WB</div>
        </div>
    </div>
    <div class="register-container">
        <h3>Register File State</h3>
        <div id="registerTable" class="register-grid">
            <div class="grid-header">Register</div><div class="grid-header">Value</div>
        </div>
    </div>
    <div class="hazard-container">
        <h3>Hazard Detection Panel</h3>
        <div id="hazardTable" class="hazard-grid">
            <div class="grid-header">Cycle</div>
            <div class="grid-header">Type</div>
            <div class="grid-header">Producer</div>
            <div class="grid-header">Consumer</div>
            <div class="grid-header">Register</div>
        </div>
    </div>
</div>

<script>
    const pipelineData = {"0": [{"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00000000\nInstruction: nop ", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00000000\nInstruction: nop ", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00000000\nInstruction: nop ", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00000000\nInstruction: nop ", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00000000\nInstruction: nop ", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "4": [null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00000100\nInstruction: addi ra, zero, 4", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00000100\nInstruction: addi ra, zero, 4", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00000100\nInstruction: addi ra, zero, 4\n--- ALU Op ---\n0 + 4 = 4", "display_text": "EX<br>0 + 4 = 4", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00000100\nInstruction: addi ra, zero, 4", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00000100\nInstruction: addi ra, zero, 4", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "8": [null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00001000\nInstruction: addi sp, zero, 5", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00001000\nInstruction: addi sp, zero, 5", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00001000\nInstruction: addi sp, zero, 5\n--- ALU Op ---\n0 + 5 = 5", "display_text": "EX<br>0 + 5 = 5", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00001000\nInstruction: addi sp, zero, 5\n--- Hazard Source ---", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": true}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00001000\nInstruction: addi sp, zero, 5", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "12": [null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00001100\nInstruction: add gp, ra, sp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00001100\nInstruction: add gp, ra, sp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00001100\nInstruction: add gp, ra, sp\n--- Hazard Source ---\n--- Forwarding Destination ---\nForwardA: Code 2\nForwardB: Code 1\n--- ALU Op ---\n4 + 5 = 9", "display_text": "EX<br>4 + 5 = 9", "hazard_info": {"forwardA": 2, "forwardB": 1}, "is_hazard_source": true}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00001100\nInstruction: add gp, ra, sp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00001100\nInstruction: add gp, ra, sp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "16": [null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00010000\nInstruction: addi tp, zero, 2047", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00010000\nInstruction: addi tp, zero, 2047", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00010000\nInstruction: addi tp, zero, 2047\n--- ALU Op ---\n0 + 2047 = 2047", "display_text": "EX<br>0 + 2047 = 2047", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00010000\nInstruction: addi tp, zero, 2047", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00010000\nInstruction: addi tp, zero, 2047", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "20": [null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00010100\nInstruction: addi t0, zero, 16", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00010100\nInstruction: addi t0, zero, 16", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00010100\nInstruction: addi t0, zero, 16\n--- ALU Op ---\n0 + 16 = 16", "display_text": "EX<br>0 + 16 = 16", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00010100\nInstruction: addi t0, zero, 16\n--- Hazard Source ---", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": true}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00010100\nInstruction: addi t0, zero, 16", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "24": [null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00011000\nInstruction: sub t1, tp, t0", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00011000\nInstruction: sub t1, tp, t0", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00011000\nInstruction: sub t1, tp, t0\n--- Hazard Source ---\n--- Forwarding Destination ---\nForwardA: Code 2\nForwardB: Code 1\n--- ALU Op ---\n2047 - 16 = 2031", "display_text": "EX<br>2047 - 16 = 2031", "hazard_info": {"forwardA": 2, "forwardB": 1}, "is_hazard_source": true}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00011000\nInstruction: sub t1, tp, t0", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00011000\nInstruction: sub t1, tp, t0", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null, null], "28": [null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00011100\nInstruction: xor t2, t1, gp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00011100\nInstruction: xor t2, t1, gp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00011100\nInstruction: xor t2, t1, gp\n--- Hazard Source ---\n--- Forwarding Destination ---\nForwardA: Code 1\n--- ALU Op ---\n2031 ^ 9 = 2022", "display_text": "EX<br>2031 ^ 9 = 2022", "hazard_info": {"forwardA": 1, "forwardB": 0}, "is_hazard_source": true}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00011100\nInstruction: xor t2, t1, gp\n--- Hazard Source ---", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": true}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00011100\nInstruction: xor t2, t1, gp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null, null], "32": [null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00100000\nInstruction: or s0, t1, t0", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00100000\nInstruction: or s0, t1, t0", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00100000\nInstruction: or s0, t1, t0\n--- Forwarding Destination ---\nForwardA: Code 2\n--- ALU Op ---\n2031 | 16 = 2047", "display_text": "EX<br>2031 | 16 = 2047", "hazard_info": {"forwardA": 2, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00100000\nInstruction: or s0, t1, t0", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00100000\nInstruction: or s0, t1, t0", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null, null], "36": [null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00100100\nInstruction: and s1, t1, t0", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00100100\nInstruction: and s1, t1, t0", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00100100\nInstruction: and s1, t1, t0\n--- ALU Op ---\n2031 & 16 = 0", "display_text": "EX<br>2031 & 16 = 0", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00100100\nInstruction: and s1, t1, t0", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00100100\nInstruction: and s1, t1, t0", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null, null], "40": [null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00101000\nInstruction: sll a0, t2, sp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00101000\nInstruction: sll a0, t2, sp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00101000\nInstruction: sll a0, t2, sp\n--- ALU Op ---\n2022 << 5 = 64704", "display_text": "EX<br>2022 &lt;&lt; 5 = 64704", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00101000\nInstruction: sll a0, t2, sp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00101000\nInstruction: sll a0, t2, sp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null, null], "44": [null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00101100\nInstruction: srl a1, t2, sp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00101100\nInstruction: srl a1, t2, sp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00101100\nInstruction: srl a1, t2, sp\n--- ALU Op ---\n2022 >> 5 = 63", "display_text": "EX<br>2022 >> 5 = 63", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00101100\nInstruction: srl a1, t2, sp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00101100\nInstruction: srl a1, t2, sp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null, null], "48": [null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00110000\nInstruction: sra a2, t2, sp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00110000\nInstruction: sra a2, t2, sp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00110000\nInstruction: sra a2, t2, sp\n--- ALU Op ---\n2022 >>> 5 = 63", "display_text": "EX<br>2022 >>> 5 = 63", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00110000\nInstruction: sra a2, t2, sp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00110000\nInstruction: sra a2, t2, sp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null, null], "52": [null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00110100\nInstruction: slt a3, tp, tp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00110100\nInstruction: slt a3, tp, tp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00110100\nInstruction: slt a3, tp, tp\n--- ALU Op ---\n2047 < 2047 = 0", "display_text": "EX<br>2047 &lt; 2047 = 0", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00110100\nInstruction: slt a3, tp, tp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00110100\nInstruction: slt a3, tp, tp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null, null], "56": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00111000\nInstruction: slt a3, tp, t0", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00111000\nInstruction: slt a3, tp, t0", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00111000\nInstruction: slt a3, tp, t0\n--- ALU Op ---\n2047 < 16 = 0", "display_text": "EX<br>2047 &lt; 16 = 0", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00111000\nInstruction: slt a3, tp, t0", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00111000\nInstruction: slt a3, tp, t0", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null, null], "60": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x00111100\nInstruction: slt a3, t0, tp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x00111100\nInstruction: slt a3, t0, tp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x00111100\nInstruction: slt a3, t0, tp\n--- ALU Op ---\n16 < 2047 = 1", "display_text": "EX<br>16 &lt; 2047 = 1", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x00111100\nInstruction: slt a3, t0, tp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x00111100\nInstruction: slt a3, t0, tp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null, null], "64": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01000000\nInstruction: sltu a3, tp, tp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x01000000\nInstruction: sltu a3, tp, tp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x01000000\nInstruction: sltu a3, tp, tp\n--- ALU Op ---\n2047 <u 2047 = 0", "display_text": "EX<br>2047 &lt;u 2047 = 0", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x01000000\nInstruction: sltu a3, tp, tp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x01000000\nInstruction: sltu a3, tp, tp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null, null], "68": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01000100\nInstruction: sltu a3, tp, t0", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x01000100\nInstruction: sltu a3, tp, t0", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x01000100\nInstruction: sltu a3, tp, t0\n--- ALU Op ---\n2047 <u 16 = 0", "display_text": "EX<br>2047 &lt;u 16 = 0", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x01000100\nInstruction: sltu a3, tp, t0", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x01000100\nInstruction: sltu a3, tp, t0", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null, null], "72": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01001000\nInstruction: sltu a3, t0, tp", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x01001000\nInstruction: sltu a3, t0, tp", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x01001000\nInstruction: sltu a3, t0, tp\n--- ALU Op ---\n16 <u 2047 = 1", "display_text": "EX<br>16 &lt;u 2047 = 1", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x01001000\nInstruction: sltu a3, t0, tp", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x01001000\nInstruction: sltu a3, t0, tp", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, null], "76": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01001100\nInstruction: N/A_ASM", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x01001100\nInstruction: N/A_ASM", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x01001100\nInstruction: N/A_ASM\nNo instruction fetched", "display_text": "No instruction fetched", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x01001100\nInstruction: N/A_ASM", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "WB", "tooltip": "Stage: WB\nPC: 0x01001100\nInstruction: N/A_ASM", "display_text": "WB", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}], "80": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01010000\nInstruction: N/A_ASM", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x01010000\nInstruction: N/A_ASM", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x01010000\nInstruction: N/A_ASM\nNo instruction fetched", "display_text": "No instruction fetched", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "MEM", "tooltip": "Stage: MEM\nPC: 0x01010000\nInstruction: N/A_ASM", "display_text": "MEM", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}], "84": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01010100\nInstruction: N/A_ASM", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x01010100\nInstruction: N/A_ASM", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "EX", "tooltip": "Stage: EX\nPC: 0x01010100\nInstruction: N/A_ASM\nNo instruction fetched", "display_text": "No instruction fetched", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}], "88": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01011000\nInstruction: N/A_ASM", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}, {"stage": "ID", "tooltip": "Stage: ID\nPC: 0x01011000\nInstruction: N/A_ASM", "display_text": "ID", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}], "92": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, {"stage": "IF", "tooltip": "Stage: IF\nPC: 0x01011100\nInstruction: N/A_ASM", "display_text": "IF", "hazard_info": {"forwardA": 0, "forwardB": 0}, "is_hazard_source": false}]};
    const instructionLabels = ["PC_0x00000000 | 00000013 (nop )", "PC_0x00000004 | 00400093 (addi ra, zero, 4)", "PC_0x00000008 | 00500113 (addi sp, zero, 5)", "PC_0x0000000c | 002081b3 (add gp, ra, sp)", "PC_0x00000010 | 7ff00213 (addi tp, zero, 2047)", "PC_0x00000014 | 01000293 (addi t0, zero, 16)", "PC_0x00000018 | 40520333 (sub t1, tp, t0)", "PC_0x0000001c | 003343b3 (xor t2, t1, gp)", "PC_0x00000020 | 00536433 (or s0, t1, t0)", "PC_0x00000024 | 005374b3 (and s1, t1, t0)", "PC_0x00000028 | 00239533 (sll a0, t2, sp)", "PC_0x0000002c | 0023d5b3 (srl a1, t2, sp)", "PC_0x00000030 | 4023d633 (sra a2, t2, sp)", "PC_0x00000034 | 004226b3 (slt a3, tp, tp)", "PC_0x00000038 | 005226b3 (slt a3, tp, t0)", "PC_0x0000003c | 0042a6b3 (slt a3, t0, tp)", "PC_0x00000040 | 004236b3 (sltu a3, tp, tp)", "PC_0x00000044 | 005236b3 (sltu a3, tp, t0)", "PC_0x00000048 | 0042b6b3 (sltu a3, t0, tp)", "PC_0x0000004c | 00000000 (N/A_ASM)", "PC_0x00000050 | 00000000 (N/A_ASM)", "PC_0x00000054 | 00000000 (N/A_ASM)", "PC_0x00000058 | 00000000 (N/A_ASM)", "PC_0x0000005c | 00000000 (N/A_ASM)"];
    const registerData = [{"x0": "0x00000000", "x1": "0x00000000", "x2": "0x00000000", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000000", "x2": "0x00000000", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000000", "x2": "0x00000000", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000000", "x2": "0x00000000", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000000", "x2": "0x00000000", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000000", "x2": "0x00000000", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000000", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00000000", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x00000000", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00000000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x00000000", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x00000000", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x00000000", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x00000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00000000", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00000000", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00111111", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00111111", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00111111", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00111111", "x13": "0x00000001", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00111111", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00111111", "x13": "0x00000000", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}, {"x0": "0x00000000", "x1": "0x00000100", "x2": "0x00000101", "x3": "0x00001001", "x4": "0x11111111111", "x5": "0x00010000", "x6": "0x11111101111", "x7": "0x11111100110", "x8": "0x11111111111", "x9": "0x00000000", "x10": "0x1111110011000000", "x11": "0x00111111", "x12": "0x00111111", "x13": "0x00000001", "x14": "0x00000000", "x15": "0x00000000", "x16": "0x00000000", "x17": "0x00000000", "x18": "0x00000000", "x19": "0x00000000", "x20": "0x00000000", "x21": "0x00000000", "x22": "0x00000000", "x23": "0x00000000", "x24": "0x00000000", "x25": "0x00000000", "x26": "0x00000000", "x27": "0x00000000", "x28": "0x00000000", "x29": "0x00000000", "x30": "0x00000000", "x31": "0x00000000"}];
    const hazardData = [{"cycle": 5, "type": "RAW", "producer_pc": 4352, "consumer_pc": 65536, "register": "x2", "forward_path": "EX -> ID"}, {"cycle": 5, "type": "RAW", "producer_pc": 4096, "consumer_pc": 65536, "register": "x1", "forward_path": "MEM -> ID"}, {"cycle": 8, "type": "RAW", "producer_pc": 69632, "consumer_pc": 69888, "register": "x5", "forward_path": "EX -> ID"}, {"cycle": 8, "type": "RAW", "producer_pc": 65792, "consumer_pc": 69888, "register": "x4", "forward_path": "MEM -> ID"}, {"cycle": 9, "type": "RAW", "producer_pc": 69888, "consumer_pc": 1048576, "register": "x6", "forward_path": "EX -> ID"}, {"cycle": 10, "type": "RAW", "producer_pc": 69888, "consumer_pc": 1048832, "register": "x6", "forward_path": "MEM -> ID"}];
    const numCycles = 24;
    const colorMap = {"IF": "#4da6ff", "ID": "#5cd65c", "EX": "#ff9933", "MEM": "#b366ff", "WB": "#ff4d4d", "STALL": "#bfbfbf"};
    const abiNames = [
        "zero", "ra", "sp", "gp", "tp", "t0", "t1", "t2", "s0/fp", "s1", 
        "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", 
        "s2", "s3", "s4", "s5", "s6", "s7", "s8", "s9", "s10", "s11", 
        "t3", "t4", "t5", "t6"
    ];
    let currentCycle = 0;
    let animationInterval = null;
    let animationSpeed = 500;
    
    const pipelineDisplay = document.getElementById('pipelineDisplay');
    const registerTable = document.getElementById('registerTable');
    const hazardTable = document.getElementById('hazardTable');
    const cycleCounter = document.getElementById('cycleCounter');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const restartBtn = document.getElementById('restartBtn');
    const speedControl = document.getElementById('speedControl');
    const speedValue = document.getElementById('speedValue');
    const searchBox = document.getElementById('searchBox');
    const exportBtn = document.getElementById('exportBtn');

    function updateDisplay() {
        cycleCounter.textContent = `Cycle ${currentCycle} / ${numCycles - 1}`;
        updatePipelineDisplay();
        updateRegisterTable();
        updateHazardTable();
        prevBtn.disabled = currentCycle === 0;
        nextBtn.disabled = currentCycle === numCycles - 1;
    }

    function updatePipelineDisplay() {
        const filterText = searchBox.value.toLowerCase();
        while (pipelineDisplay.children.length > 6) {
            pipelineDisplay.removeChild(pipelineDisplay.lastChild);
        }
        instructionLabels.forEach((label, instrIdx) => {
            if (instrIdx === 0) return;

            if (filterText && !label.toLowerCase().includes(filterText)) {
                return;
            }
            
            const syntheticPcKey = (instrIdx * 4);
            const syntheticPcExists = Object.values(vcd_actual_to_synthetic_pc_map).includes(syntheticPcKey);

            if (!syntheticPcExists) return;

            const rowElements = [];
            const labelDiv = document.createElement('div');
            labelDiv.className = 'grid-cell instruction-label';
            labelDiv.textContent = label;
            labelDiv.addEventListener('click', () => {
                rowElements.slice(1).forEach(el => el.classList.toggle('hidden'));
            });

            pipelineDisplay.appendChild(labelDiv);
            rowElements.push(labelDiv);
            
            const cycleDataForPc = pipelineData[syntheticPcKey];
            const instrCycleData = cycleDataForPc ? cycleDataForPc[currentCycle] : null;

            if (instrCycleData && instrCycleData.is_hazard_source) {
                labelDiv.classList.add('hazard-source-highlight');
            }
            
            ["IF", "ID", "EX", "MEM", "WB"].forEach(stageName => {
                const stageCell = document.createElement('div');
                stageCell.className = 'grid-cell stage-cell';

                if (instrCycleData && instrCycleData.stage === stageName) {
                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'stage-content';
                    contentDiv.style.backgroundColor = colorMap[stageName];
                    
                    contentDiv.innerHTML = instrCycleData.display_text; 
                    
                    if (stageName === "EX" && (instrCycleData.hazard_info.forwardA !== 0 || instrCycleData.hazard_info.forwardB !== 0)) {
                        contentDiv.classList.add('forwarding-destination-highlight');
                    }
                    
                    if (instrCycleData.is_hazard_source) {
                         contentDiv.classList.add('hazard-source-highlight');
                    }
                    
                    const tooltipSpan = document.createElement('span');
                    tooltipSpan.className = 'tooltip-text';
                    tooltipSpan.textContent = instrCycleData.tooltip;
                    contentDiv.appendChild(tooltipSpan);
                    stageCell.appendChild(contentDiv);
                }
                pipelineDisplay.appendChild(stageCell);
                rowElements.push(stageCell);
            });
        });
    }
    
    function updateRegisterTable() {
    while (registerTable.children.length > 2) {
        registerTable.removeChild(registerTable.lastChild);
    }
    const currentRegisterValues = registerData[currentCycle];
    const previousRegisterValues = currentCycle > 0 ? registerData[currentCycle - 1] : null;

    for (let i = 0; i < 32; i++) {
        const regId = `x${i}`;
        const regName = `${regId} (${abiNames[i]})`;
        const nameCell = document.createElement('div');
        nameCell.className = 'grid-cell register-name-cell';
        nameCell.textContent = regName;
        registerTable.appendChild(nameCell);
        
        const valueCell = document.createElement('div');
        valueCell.className = 'grid-cell register-value-cell';

        const currentValueHex = currentRegisterValues ? (currentRegisterValues[regId] || '0x00000000') : '0x00000000';

        let displayValue = currentValueHex;
        if (typeof currentValueHex === 'string' && currentValueHex.startsWith('0x')) {
            const dec = parseInt(currentValueHex, 16);
            if (!Number.isNaN(dec)) {
                displayValue = `${currentValueHex} (${dec})`;
            }
        }
        valueCell.textContent = displayValue;

        if (previousRegisterValues) {
            const previousValueHex = previousRegisterValues[regId] || '0x00000000';
            if (currentValueHex !== previousValueHex) {
                valueCell.classList.add('changed');
            }
        }
        registerTable.appendChild(valueCell);
        }
    }

    function updateHazardTable() {
        while (hazardTable.children.length > 5) {
            hazardTable.removeChild(hazardTable.lastChild);
        }
        hazardData.forEach(hazard => {
            if (hazard.cycle === currentCycle) {
                const producerLabel = instructionLabels.find(label => label.startsWith(`PC_0x${vcd_actual_to_synthetic_pc_map[hazard.producer_pc].toString(16).padStart(8, '0')}`));
                const consumerLabel = instructionLabels.find(label => label.startsWith(`PC_0x${vcd_actual_to_synthetic_pc_map[hazard.consumer_pc].toString(16).padStart(8, '0')}`));

                const row = document.createElement('div');
                row.className = 'hazard-row';
                row.style.display = 'contents';
                row.onclick = () => {
                    currentCycle = hazard.cycle;
                    updateDisplay();
                };

                const cycleCell = document.createElement('div');
                cycleCell.className = 'grid-cell';
                cycleCell.textContent = hazard.cycle;
                row.appendChild(cycleCell);

                const typeCell = document.createElement('div');
                typeCell.className = 'grid-cell';
                typeCell.textContent = hazard.type;
                row.appendChild(typeCell);

                const producerCell = document.createElement('div');
                producerCell.className = 'grid-cell';
                producerCell.textContent = producerLabel ? producerLabel.split('(')[1].split(')')[0] : `PC 0x${hazard.producer_pc.toString(16)}`;
                row.appendChild(producerCell);

                const consumerCell = document.createElement('div');
                consumerCell.className = 'grid-cell';
                consumerCell.textContent = consumerLabel ? consumerLabel.split('(')[1].split(')')[0] : `PC 0x${hazard.consumer_pc.toString(16)}`;
                row.appendChild(consumerCell);

                const regCell = document.createElement('div');
                regCell.className = 'grid-cell';
                regCell.textContent = hazard.register;
                row.appendChild(regCell);

                hazardTable.appendChild(row);
            }
        });
    }

    function nextCycle() { if (currentCycle < numCycles - 1) { currentCycle++; updateDisplay(); } else { stopAnimation(); } }
    function prevCycle() { if (currentCycle > 0) { currentCycle--; updateDisplay(); } }
    
    function startAnimation() {
        if (animationInterval) return;
        playPauseBtn.textContent = 'Pause';
        animationInterval = setInterval(nextCycle, animationSpeed);
    }
    function stopAnimation() {
        clearInterval(animationInterval);
        animationInterval = null;
        playPauseBtn.textContent = 'Play';
    }
    function restartAnimation() { stopAnimation(); currentCycle = 0; updateDisplay(); }

    prevBtn.addEventListener('click', prevCycle);
    nextBtn.addEventListener('click', nextCycle);
    restartBtn.addEventListener('click', restartAnimation);
    playPauseBtn.addEventListener('click', () => animationInterval ? stopAnimation() : startAnimation());
    searchBox.addEventListener('input', updateDisplay);
    exportBtn.addEventListener('click', () => {
        const html = document.documentElement.outerHTML;
        const blob = new Blob([html], {type: 'text/html'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'pipeline_animation.html';
        a.click();
    });
    
    speedControl.addEventListener('input', () => {
        animationSpeed = speedControl.value;
        speedValue.textContent = `${animationSpeed}ms`;
        if (animationInterval) {
            stopAnimation();
            startAnimation();
        }
    });
    
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') nextCycle();
        if (e.key === 'ArrowLeft') prevCycle();
    });

    const vcd_actual_to_synthetic_pc_map = {"0": 0, "256": 4, "4096": 8, "4352": 12, "65536": 16, "65792": 20, "69632": 24, "69888": 28, "1048576": 32, "1048832": 36, "1052672": 40, "1052928": 44, "1114112": 48, "1114368": 52, "1118208": 56, "1118464": 60, "16777216": 64, "16777472": 68, "16781312": 72, "16781568": 76, "16842752": 80, "16843008": 84, "16846848": 88, "16847104": 92};

    updateDisplay();
</script>
</body>
</html>
